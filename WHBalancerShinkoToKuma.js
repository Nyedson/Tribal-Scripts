//script by Sophie "Shinko to Kuma". Skype: live:sophiekitsune discord: Sophie#2418 website: https://shinko-to-kuma.my-free.website/// Updated on July 16th, fixing math, adding recalculation of averagesconst _0x45ad=['' class='sophRowA'','Built out, reducing res left in village ','Ferro','Î£ÏÎ½Î¿Î»Î¿ Î¾ÏÎ»Î¿Ï…','
                <div id="progressbar" style="width: 100%;
                background-color: #36393f;"><div id="progress" style="width: 0%;
                height: 35px;
                background-color: #4CAF50;
                text-align: center;
                line-height: 32px;
                color: black;"></div>
                </div>','<div id='totals' class='sophHeader' border=0>
                    <table id='totalsAndAverages' width='100%'>
                    <tr class='sophRowA'>
                    <td>','</div>
                <div id="sendResources" class="flex-container sophHeader" style="position: relative">
                    <button class="sophRowA collapsible" style="width: 250px;min-width: 230px;">Open settings menu</button>
                    <div class="content submenu" style="width: 500px;height:500px;z-index:99999">
                        <form id="settings">
                            <table style="border-spacing: 2px;">
                            <tr>
                            <td style="padding: 6px;">
                            <label for="isMinting">Minting?</label></td><td style="padding: 6px;"><input type="checkbox" name="isMinting"></td></tr>
                            <tr>
                            <td style="padding: 6px;">
                            <label for="lowPoints">Prioritise</label></td><td style="padding: 6px;"><input type="range" min="0" max="13000" step="10" value="','totalMerchants','Managed to grab the page','&#10;Iron in WH: ','toggle','Ferro per villaggio','IsÃ¤ pro Dorf','Switching to standard colors','Î§Ï‰ÏÎ¹ÏŒ ÏƒÏ„ÏŒÏ‡Î¿Ï‚','Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…ÙˆØ§Ø±Ø¯','Wood per village','Î Î·Î»ÏŒÏ‚ Î±Î½Î± Ï‡Ï‰ÏÎ¹ÏŒ','Totaal leem','desktop','.res.iron,.warn_90.iron,.warn.iron','Ø­Ø¯ÙŠØ¯','ar_AE','Gemaakt door Sophie 'Shinko to Kuma'','Distanta','Facut de Sophie 'Shinko to Kuma'','de_CH','Reached list creation','.collapsible','split','Too much clay incoming in ','Vas','find','mimimalistGray','IsÃ¤','Argilla totale','Warehouse in village ','.flex-container','setItem','#mobileHeader','Villaggio di origine','addings rows to be sent to the res at the target','.icon.header','click','round','value','div[id*='sendResources']','innerText','log','</table></center></div>','&#10;Warehouse capacity: ','lowPoints','ÎžÏÎ»Î¿','post','floor','Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø­Ø¯ÙŠØ¯','sitter','scrollHeight','nl_NL','innerHTML','" class="slider" name="lowPoints" oninput="sliderChange('lowPoints',this.value)">
                            < <output id="lowPoints"></output> points</td></tr>
                            <tr>
                            <td style="padding: 6px;">
                            <label for="highPoints">Finished villages</label></td><td style="padding: 6px;"><input type="range" min="0" max="13000" step="10" value="','. Adjusting what we leave at home to be ','</td>
                        <td class="sophHeader" width="10%">
                            <font size="1">',', clayadjustement: ','</td>
            <td>','Ø§Ù„Ù…Ø³Ø§ÙØ©','</td>
                    </tr>
                    <tr>
                        <td class="sophHeader" width="25%" style="text-align:center">','show','' class='sophRowB'','Hout','" class="slider" name="highFarm" oninput="sliderChange('highFarm',this.value)">
                            <output id="highFarm"></output> pop</td></tr>
                            <tr>
                            <td style="padding: 6px;">
                            <label for="builtOutPercentage">WH capacity finished villages: </label></td><td style="padding: 6px;"><input type="range" min="0" max="1" step="0.01" value="','#content_value','Ø·Ù…ÙŠ','adding rows to be received to the res at the target','width','<span class="icon header stone"> </span></td>
            <td width="50" style="text-align:center">','Too much wood incoming in ','target','Total lemn','SzÃ¡rmazÃ¡si hely','Madeira','iron','textContent','Ferro por aldeia','Total de madeira','maxHeight','Ã–sszes agyag','                    Warehouse capacity: ','</td>
                    <td>Actual clayaverage after correction: ','</td>
                    <td>','#appendHere','Destino','Finished sending!','Incoming resources: 
                    Wood: ','Distance','style','href','Average is higher than capacity, reduce','map_send','Lehm pro Dorf','addEventListener','.quickedit-vn','
        <tr ','</font>
                        </td>
                    </tr>
                </tbody>
            </table>
                ','Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø®Ø´Ø¨','Î£ÏÎ½Î¿Î»Î¿ Ï€Î·Î»Î¿Ï',' are considered finished), to spread evenly. Clearly, that is not a good idea','Sistema','Lehm','error','Ù…ÙˆØ§Ø±Ù†Ø© Ø§Ù„Ù…ÙˆØ§Ø±Ø¯','
        <style>
        .sophRowA {
            background-color: #F4E4BC;
            color: black;
            }
            .sophRowB {
            background-color: #fff5da;
            color: black;
            }
            .sophHeader {
            background-color: #c6a768;
            font-weight: bold;
            color: #803000;
            }
            .sophLink
            {
                color:#803000;
            }
        .btnSophie
        {
            linear-gradient(to bottom, #947a62 0%,#7b5c3d 22%,#6c4824 30%,#6c4824 100%)
            color:white
        }
        .btnSophie:hover
        { 
            linear-gradient(to bottom, #b69471 0%,#9f764d 22%,#8f6133 30%,#6c4d2d 100%);
            color: white
        }
        .collapsible {
            background-color: #F4E4BC;
            color: white;
            cursor: pointer;
            padding: 10px;
            width: 100%;
            border: none;
            text-align: left;
            outline: none;
            font-size: 15px;
            }
            
            .active, .collapsible:hover {
            background-color:  #fff5da;
            }
            
            .collapsible:after {
            content: '+';
            color: white;
            font-weight: bold;
            float: right;
            margin-left: 5px;
            }
            
            .active:after {
            content: "-";
            }
            
            .content {
            padding: 0 5px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.2s ease-out;
            background-color:  #5b5f66;
            color: white;
            }
            
            .item-padded {
            padding: 5px;
            }
            
            .flex-container {
            display: flex; 
            justify-content: space-between;
            align-items:center
            }
            
            .submenu{
                display:flex;
                flex-direction:column;
                position: absolute;
                left:0px;
                top:37px;
                min-width:240px;
            }
        </style>','highPoints','Clay','Ã–sszes fa','el_GR','Î‘Ï€Î¿ÏƒÏ„Î¿Î»Î® Ï€ÏŒÏÏ‰Î½','ÎžÏÎ»Î¿ Î±Î½Î± Ï‡Ï‰ÏÎ¹ÏŒ','append','availableMerchants','CÃ©lÃ¡llomÃ¡s','Target village','Total de argila','remove','checked','stringify','Schimb Premium','isMinting','class='sophRowB'','Total argila','.content-border','Leem',' too small for average, reducing resources, and increasing for every other village','hu_HU','TÃ¡volsÃ¡g','Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î®Î¸Î·ÎºÎµ Î±Ï€ÏŒ Ï„Î·Î½ Sophie 'Shinko to Kuma'','Madeira por aldeia','active','<div class='sophRowA' style='width:800px' ><table style='width:100%'><tr class="sophHeader"><td>Village</td><td>Points</td><td>Merchants left</td><td colspan="3">Resources</td><td>WH capacity</td></tr>','Premium Beurs','Leem per dorp','builtOutPercentage','>
            <td>','highFarm','Î£Î¯Î´ÎµÏÎ¿','
                    Clay: ','removed empty lines','
            </td>
            <td>
                <span class="res iron" style="padding-left:1em">&nbsp;</span>','Argila per sat','Farm almost full (','Bilancia risorse','
            </td>
            <td>
                <span class="res stone" style="padding-left:1em">&nbsp;</span>','always','Premium exchange','sort','Village: ',':button[id^="building"]','Doel','#progress',' </a></td>
            <td> <a href="','System','
        <style>
        .sophRowA {
            background-color: #FEC5E5;
            color: #E11584;
            }
            .sophRowB {
            background-color: #fcd4eb;
            color: #E11584;
            }
            .sophHeader {
            background-color: #F699CD;
            font-weight: bold;
            color: #E11584;
            }
            .sophLink
            {
                color:#7d3873;
            }
        .btnSophie
        {
            background-image: linear-gradient(#FEC5E5 0%, #FD5DA8 30%, #FF1694 80%, #E11584 100%);
        }
        .btnSophie:hover
        { 
            background-image: linear-gradient(#F2B8C6 0%, #FCBACB 30%, #FA86C4 80%, #FE7F9C 100%);
        }
        .collapsible {
            background-color: #FEC5E5;
            color: white;
            cursor: pointer;
            padding: 10px;
            width: 100%;
            border: none;
            text-align: left;
            outline: none;
            font-size: 15px;
            }
            
            .active, .collapsible:hover {
            background-color:  #fcd4eb;
            }
            
            .collapsible:after {
            content: '+';
            color: white;
            font-weight: bold;
            float: right;
            margin-left: 5px;
            }
            
            .active:after {
            content: "-";
            }
            
            .content {
            padding: 0 5px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.2s ease-out;
            background-color:  #5b5f66;
            color: white;
            }
            
            .item-padded {
            padding: 5px;
            }
            
            .flex-container {
            display: flex; 
            justify-content: space-between;
            align-items:center
            }
            
            .submenu{
                display:flex;
                flex-direction:column;
                position: absolute;
                left:0px;
                top:37px;
                min-width:240px;
            }
        </style>','" class="sophLink" data-toggle="tooltip" title="Wood in WH: ','Holz','Total clay','pushed to clean array','
        <style>
        .sophRowA {
            background-color: #dedede;
            color: #545454;
            }
            .sophRowB {
            background-color: #f1f1f1;
            color: #545454;
            }
            .sophHeader {
            background-color: #ded9d9;
            font-weight: bold;
            color: #545454;
            }
            .sophLink
            {
                color:#1626ff;
            }
        .btnSophie
        {
            background-image: linear-gradient(#00a1fe 0%, #5d9afd 30%, #1626ff 80%, #1f15e1 100%);
            color:white
        }
        .btnSophie:hover
        { 
            background-image: linear-gradient(#b8bcf2 0%, #babbfc 30%, #8c86fa 80%, #969fff 100%);
            color: white
        }
        .collapsible {
            background-color: #dedede;
            color: white;
            cursor: pointer;
            padding: 10px;
            width: 100%;
            border: none;
            text-align: left;
            outline: none;
            font-size: 15px;
            }
            
            .active, .collapsible:hover {
            background-color:  #f1f1f1;
            }
            
            .collapsible:after {
            content: '+';
            color: white;
            font-weight: bold;
            float: right;
            margin-left: 5px;
            }
            
            .active:after {
            content: "-";
            }
            
            .content {
            padding: 0 5px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.2s ease-out;
            background-color:  #5b5f66;
            color: white;
            }
            
            .item-padded {
            padding: 5px;
            }
            
            .flex-container {
            display: flex; 
            justify-content: space-between;
            align-items:center
            }
            
            .submenu{
                display:flex;
                flex-direction:column;
                position: absolute;
                left:0px;
                top:37px;
                min-width:240px;
            }
        </style>','mobile','Grabbed transport page','#trades_table tr','Verstuur grondstoffen','game.php?&screen=overview_villages&mode=trader&type=inc&page=-1&type=inc','Too much iron incoming in ','div[id*='restart']','Trimite resurse','Distanza',' id='','class='sophRowA'','
            <style>
            .sophRowA {
            background-color: #32353b;
            color: white;
            }
            .sophRowB {
            background-color: #36393f;
            color: white;
            }
            .sophHeader {
            background-color: #202225;
            font-weight: bold;
            color: white;
            }
            .sophLink
            {
                color:#40D0E0;
            }
            .btnSophie
            {
                background-image: linear-gradient(#6e7178 0%, #36393f 30%, #202225 80%, black 100%);
            }
            .btnSophie:hover
            { 
                background-image: linear-gradient(#7b7e85 0%, #40444a 30%, #393c40 80%, #171717 100%);
            }
            .collapsible {
                background-color: #32353b;
                color: white;
                cursor: pointer;
                padding: 10px;
                width: 100%;
                border: none;
                text-align: left;
                outline: none;
                font-size: 15px;
                }
                
                .active, .collapsible:hover {
                background-color:  #36393f;
                }
                
                .collapsible:after {
                content: '+';
                color: white;
                font-weight: bold;
                float: right;
                margin-left: 5px;
                }
                
                .active:after {
                content: "-";
                }
                
                .content {
                padding: 0 5px;
                max-height: 0;
                overflow: hidden;
                transition: max-height 0.2s ease-out;
                background-color:  #5b5f66;
                color: white;
                }
                
                .item-padded {
                padding: 5px;
                }
                
                .flex-container {
                display: flex; 
                justify-content: space-between;
                align-items:center
                }
                
                .submenu{
                    display:flex;
                    flex-direction:column;
                    position: absolute;
                    left:0px;
                    top:37px;
                    min-width:240px;
                }
            </style>','
                    Iron: ',', or village points are higher than the required setting: ','classList','.header.population','Finished','replace','previousElementSibling',' needs help growing, setting required resources to ',') in ','url','Afstand','children','% of WH capacity','$1.$2','.res.mstone,.warn_90.mstone,.warn.mstone','ro_RO','Iron','getItem','Ã–sszes vas','disabled','Ø®Ø´Ø¨','Distanz','Fa/falu','fier per sat','Sistem','Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø·Ù…ÙŠ','Created by Sophie 'Shinko to Kuma'','Done with this cycle','Warehouse balancer','en_DK','<span class="icon header iron"> </span></td>
            <td style="text-align:center"><input type="button" class="btn btnSophie" id="building" value="','Argilla',' wood, ','Total Lehm','wood','" class="slider" name="needsMorePercentage" oninput="sliderChange('needsMorePercentage',this.value)">
                            <output id="needsMorePercentage"></output></td></tr>
                            <tr>
                            <td style="padding: 6px;">
                            <input type="button" class="btn evt-confirm-btn btn-confirm-yes" value="Save" onclick="saveSettings();"/></td></tr>
                            <td colspan="2" style="padding: 6px;">
                            <p style="padding:5px"><font size="1">Script by Sophie "Shinko to Kuma"</font></p>
                            </td>
                            </table>
                        </form>
                    </div>
                </div>
                <table id="tableSend" width="100%" class="sophHeader">
                <tbody id="appendHere">
                    <tr>
                        <td class="sophHeader" colspan=7 width=â€œ550â€ style="text-align:center" >','#lowPoints','nextElementSibling','distance','Current averages: ','Total Holz','#building','combined the sendings','#settings','Agyag/falu','&screen=overview_villages&mode=prod&page=-1&','serializeArray','.mheader.ressources','#contentContainer','a[href*="market"]','villageID','Legno','.res.wood,.warn_90.wood,.warn.wood','toString','#tableSend tr','val','adding res underway to target','Send resources','header','" class="sophLink">','Origem','class','attr','#needsMorePercentage','Sat Sursa','parse',' , ','Echilibrare resurse','Legno totale','Source village','text','Hout per dorp','done','Total de ferro','</table><h1>Excesses:</h1><table class='sophHeader'><tr class='sophHeader'><td>Village name</td><td>Res</td></tr>','</a> </td>
            <td width="50" style="text-align:center">','Changing to TW theme','undefined','Î£Î¯Î´ÎµÏÎ¿ Î±Î½Î± Ï‡Ï‰ÏÎ¹ÏŒ','Criado por Sophie 'Shinko to Kuma'','Creating line ','Î Î·Î»ÏŒÏ‚','</table></div>','Totaal hout','.res.mwood,.warn_90.mwood,.warn.mwood','" onclick="sendResource(','.icon.mheader','stone','Filled up the sendings','Premium-Depot','Total fier','Nyersanyag kiegyenlÃ­tÅ‘','settingsWHBalancerSophie','</td>
            <td style="text-align:right;padding-right:2em">
                ','https://v.tylercamp.me/hc/WHBalancerSophie','Ferro totale','locale','Changing to gray theme','getElementById','Manda risorse','Nyersanyagok kÃ¼ldÃ©se','prop','message','</td>
                        <td class="sophHeader" width="10%" style="text-align:center">','pink','source','warehouseCapacity','#sendResources','length','Total iron','
            </td>
            <td style="text-align:right">','</td>
        </tr>','Total wood','
<style>
.sophRowA {
background-color: #32353b;
color: white;
}
.sophRowB {
background-color: #36393f;
color: white;
}
.sophHeader {
background-color: #202225;
font-weight: bold;
color: white;
}
.sophLink
{
    color:#40D0E0;
}
.btnSophie
{
    background-image: linear-gradient(#6e7178 0%, #36393f 30%, #202225 80%, black 100%);
}
.btnSophie:hover
{ 
    background-image: linear-gradient(#7b7e85 0%, #40444a 30%, #393c40 80%, #171717 100%);
}
.collapsible {
    background-color: #32353b;
    color: white;
    cursor: pointer;
    padding: 10px;
    width: 100%;
    border: none;
    text-align: left;
    outline: none;
    font-size: 15px;
    }
    
    .active, .collapsible:hover {
    background-color:  #36393f;
    }
    
    .collapsible:after {
    content: '+';
    color: white;
    font-weight: bold;
    float: right;
    margin-left: 5px;
    }
    
    .active:after {
    content: "-";
    }
    
    .content {
    padding: 0 5px;
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.2s ease-out;
    background-color:  #5b5f66;
    color: white;
    }
    
    .item-padded {
    padding: 5px;
    }
    
    .flex-container {
    display: flex; 
    justify-content: space-between;
    align-items:center
    }
    
    .submenu{
        display:flex;
        flex-direction:column;
        position: absolute;
        left:0px;
        top:37px;
        min-width:240px;
    }
</style>','needsMorePercentage',')"></td>
        </tr>','Ziel Dorf','match','game.php?&screen=overview_villages&mode=prod&page=-1&','Excess is bigger than current available resources, setting it to current available','game.php?t=','input[name='isMinting']','name','finished','Ø§Ù„Ø£ØµÙ„','get','Balanceador de recursos','#production_table th','of the list','it_IT','#totals','test','market','farmSpaceUsed','#highFarm','Î£ÏÎ½Î¿Î»Î¿ ÏƒÎ¹Î´Î®ÏÎ¿Ï…','swedish','Ø®Ø´Ø¨ Ù„ÙƒÙ„ Ù‚Ø±ÙŠØ©','player','<div id='aftermath'><center>
        <button type="button" class="btn btnSophie" name="showStats" style="padding: 10px;width: 300px" onclick="showStats()">Show excess/shortage</button>
        <button type="button" class="btn btnSophie" name="showEndResult" style="padding: 10px;width: 300px" onclick="resAfterBalance()">Show result of balance</button>
        </center></div>','</td>
            <td width="50" style="text-align:center">',' height="40">
            <td>','push','content','Ø§Ù„Ù‡Ø¯Ù','Legno per villaggio','css','KÃ©szÃ­tette: Sophie 'Shinko to Kuma'','<div class='sophRowA' style='width:800px' ><center><h1>Shortages:</h1><table class='sophHeader'><tr class='sophHeader'><td>Village name</td><td>Res</td></tr>','Wood','focus','keys','Done.','trim','#highPoints','parentElement','prepend','points','Totaal ijzer','#mobile_header'];(function(_0x3c5e2a,_0x45ade2){const _0x43447b=function(_0x2f0c26){while(--_0x2f0c26){_0x3c5e2a['push'](_0x3c5e2a['shift']());}};_0x43447b(++_0x45ade2);}(_0x45ad,0x161));const _0x4344=function(_0x3c5e2a,_0x45ade2){_0x3c5e2a=_0x3c5e2a-0x0;let _0x43447b=_0x45ad[_0x3c5e2a];return _0x43447b;};_0x167648:console[_0x4344('0x22')]('Latest update: 30 April 2020 - Sophie 'Shinko to Kuma'');$[_0x4344('0x27')](_0x4344('0x103'));var is_mobile=!!navigator['userAgent'][_0x4344('0x11a')](/iphone|android|blackberry/ig)||![],warehouseCapacity=[],allWoodTotals=[],allClayTotals=[],allIronTotals=[],availableMerchants=[],totalMerchants=[],farmSpaceUsed=[],farmSpaceTotal=[],villagePoints=[],villagesData=[],villageID=[],allWoodObjects,allClayObjects,allIronObjects,allVillages,totalsAndAverages='',incomingRes={},totalWood,totalStone,totalIron,merchantOrders=[],excessResources=[],shortageResources=[],links=[],cleanLinks=[],stillShortage=[],stillExcess=[];function init(){warehouseCapacity=[],allWoodTotals=[],allClayTotals=[],allIronTotals=[],availableMerchants=[],totalMerchants=[],farmSpaceUsed=[],farmSpaceTotal=[],villagePoints=[],villagesData=[],villageID=[],(allWoodObjects,allClayObjects,allIronObjects,allVillages),totalsAndAverages='',incomingRes={},(totalWood,totalStone,totalIron),merchantOrders=[],excessResources=[],shortageResources=[],links=[],cleanLinks=[],stillShortage=[],stillExcess=[];}var langShinko=[_0x4344('0xc1'),'Source village','Target village',_0x4344('0x50'),_0x4344('0x13a'),_0x4344('0x63'),_0x4344('0xb5'),_0x4344('0xde'),_0x4344('0xbf'),_0x4344('0x115'),_0x4344('0x96'),_0x4344('0x112'),_0x4344('0x2'),'Clay per village','Iron per village',_0x4344('0x8b'),_0x4344('0x92')];game_data[_0x4344('0x105')]==_0x4344('0xc2')&&(langShinko=[_0x4344('0xc1'),_0x4344('0xea'),_0x4344('0x6b'),_0x4344('0x50'),_0x4344('0x13a'),'Clay',_0x4344('0xb5'),'Send resources',_0x4344('0xbf'),_0x4344('0x115'),'Total clay','Total iron',_0x4344('0x2'),'Clay per village','Iron per village',_0x4344('0x8b'),_0x4344('0x92')]);game_data['locale']==_0x4344('0xc')&&(langShinko=[_0x4344('0xc1'),'HÃ¤rkunfts Dorf',_0x4344('0x119'),_0x4344('0xba'),_0x4344('0x95'),_0x4344('0x5e'),_0x4344('0x14'),'Rohstoff vrschicke',_0x4344('0xbf'),_0x4344('0xcd'),_0x4344('0xc6'),'Total IsÃ¤','Holz pro Dorf',_0x4344('0x55'),_0x4344('0x151'),_0x4344('0xfe'),_0x4344('0x92')]);game_data[_0x4344('0x105')]==_0x4344('0xb4')&&(langShinko=[_0x4344('0xe8'),_0x4344('0xe5'),'Sat Tinta',_0x4344('0xa'),'Lemn','Argila','Fier',_0x4344('0xa0'),_0x4344('0xb'),_0x4344('0x40'),_0x4344('0x73'),_0x4344('0xff'),'Lemn per sat',_0x4344('0x86'),_0x4344('0xbc'),_0x4344('0x70'),_0x4344('0xbd')]);game_data[_0x4344('0x105')]==_0x4344('0x65')&&(langShinko=['Warehouse balancer','Î ÏÎ¿Î­Î»ÎµÏ…ÏƒÎ·',_0x4344('0x0'),'Î‘Ï€ÏŒÏƒÏ„Î±ÏƒÎ·',_0x4344('0x26'),_0x4344('0xf6'),_0x4344('0x82'),_0x4344('0x66'),_0x4344('0x79'),_0x4344('0x148'),_0x4344('0x5b'),_0x4344('0x12c'),_0x4344('0x67'),_0x4344('0x3'),_0x4344('0xf3'),_0x4344('0x8b'),_0x4344('0x92')]);game_data[_0x4344('0x105')]==_0x4344('0x2c')&&(langShinko=['Warenhuis balancer','Oorsprong',_0x4344('0x8f'),_0x4344('0xaf'),_0x4344('0x37'),_0x4344('0x75'),'Ijzer',_0x4344('0x9c'),_0x4344('0x9'),_0x4344('0xf8'),_0x4344('0x4'),_0x4344('0x143'),_0x4344('0xec'),_0x4344('0x7e'),'Ijzer per dorp',_0x4344('0x7d'),'Systeem']);game_data[_0x4344('0x105')]==_0x4344('0x126')&&(langShinko=[_0x4344('0x88'),_0x4344('0x1a'),'Villaggio obiettivo',_0x4344('0xa1'),_0x4344('0xd8'),_0x4344('0xc4'),_0x4344('0x147'),_0x4344('0x108'),'Creato da  Sophie 'Shinko to Kuma'',_0x4344('0xe9'),_0x4344('0x15'),_0x4344('0x104'),_0x4344('0x136'),'Argilla per villaggio',_0x4344('0x150'),_0x4344('0x8b'),'System']);game_data[_0x4344('0x105')]==_0x4344('0x8')&&(langShinko=[_0x4344('0x60'),_0x4344('0x121'),_0x4344('0x135'),_0x4344('0x33'),_0x4344('0xb9'),_0x4344('0x3a'),_0x4344('0x7'),_0x4344('0x1'),'ØªÙ…Øª Ø§Ù„Ø¨Ø±Ù…Ø¬Ù‡ Ù…Ù† 'Shinko to Kuma'',_0x4344('0x5a'),_0x4344('0xbe'),_0x4344('0x29'),_0x4344('0x12e'),'Ø·Ù…ÙŠ Ù„ÙƒÙ„ Ù‚Ø±ÙŠØ©','Ø­Ø¯ÙŠØ¯ Ù„ÙƒÙ„ Ù‚Ø±ÙŠØ©','Premium exchange',_0x4344('0x92')]);game_data[_0x4344('0x105')]==_0x4344('0x77')&&(langShinko=[_0x4344('0x100'),_0x4344('0x41'),_0x4344('0x6a'),_0x4344('0x78'),'Fa','Agyag',_0x4344('0x11'),_0x4344('0x109'),_0x4344('0x138'),_0x4344('0x64'),_0x4344('0x48'),_0x4344('0xb7'),_0x4344('0xbb'),_0x4344('0xd1'),'Vas/falu',_0x4344('0x8b'),_0x4344('0x92')]);game_data[_0x4344('0x105')]=='pt_BR'&&(langShinko=[_0x4344('0x123'),_0x4344('0xe1'),_0x4344('0x4d'),'DistÃ¢ncia',_0x4344('0x42'),'Argila',_0x4344('0x147'),'Enviar recursos',_0x4344('0xf4'),_0x4344('0x46'),_0x4344('0x6c'),_0x4344('0xee'),_0x4344('0x7a'),'Argila por aldeia',_0x4344('0x45'),'Troca Premium',_0x4344('0x5d')]);if(typeof colors=='undefined')cssClassesSophie=_0x4344('0x116');else{if(colors==_0x4344('0x10d'))cssClassesSophie=_0x4344('0x93');else{if(colors==_0x4344('0x12d'))cssClassesSophie='
        <style>
        .sophRowA {
            background-color: #fecd00;
            color: #006aa8;
            }
            .sophRowB {
            background-color: #ffea00;
            color: #006aa8;
            }
            .sophHeader {
            background-color: #006aa8;
            font-weight: bold;
            color: #ffffdf;
            }
            .sophLink
            {
                color:#034166;
            }
        .btnSophie
        {
            background-image: linear-gradient(#00a1fe 0%, #5d9afd 30%, #1626ff 80%, #1f15e1 100%);
        }
        .btnSophie:hover
        { 
            background-image: linear-gradient(#b8bcf2 0%, #babbfc 30%, #8c86fa 80%, #969fff 100%);
        }
        .collapsible {
            background-color: #fecd00;
            color: white;
            cursor: pointer;
            padding: 10px;
            width: 100%;
            border: none;
            text-align: left;
            outline: none;
            font-size: 15px;
            }
            
            .active, .collapsible:hover {
            background-color:  #ffea00;
            }
            
            .collapsible:after {
            content: '+';
            color: white;
            font-weight: bold;
            float: right;
            margin-left: 5px;
            }
            
            .active:after {
            content: "-";
            }
            
            .content {
            padding: 0 5px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.2s ease-out;
            background-color:  #5b5f66;
            color: white;
            }
            
            .item-padded {
            padding: 5px;
            }
            
            .flex-container {
            display: flex; 
            justify-content: space-between;
            align-items:center
            }
            
            .submenu{
                display:flex;
                flex-direction:column;
                position: absolute;
                left:0px;
                top:37px;
                min-width:240px;
            }
        </style>';else{if(colors==_0x4344('0x13'))console[_0x4344('0x22')](_0x4344('0x106')),cssClassesSophie=_0x4344('0x98');else colors=='TW'?(console[_0x4344('0x22')](_0x4344('0xf1')),cssClassesSophie=_0x4344('0x61')):(console['log'](_0x4344('0x152')),cssClassesSophie=_0x4344('0xa4'));}}}$(_0x4344('0xd5'))['eq'](0x0)['prepend'](cssClassesSophie),$(_0x4344('0x19'))['eq'](0x0)[_0x4344('0x141')](cssClassesSophie);if(localStorage[_0x4344('0xb6')]('settingsWHBalancerSophie')!=null){tempArray=JSON[_0x4344('0xe6')](localStorage[_0x4344('0xb6')](_0x4344('0x101')));var settings={};settings[_0x4344('0x71')]=tempArray[_0x4344('0x71')],settings['lowPoints']=parseInt(tempArray[_0x4344('0x25')]),settings[_0x4344('0x62')]=parseInt(tempArray[_0x4344('0x62')]),settings[_0x4344('0x81')]=parseInt(tempArray[_0x4344('0x81')]),settings[_0x4344('0x7f')]=parseFloat(tempArray[_0x4344('0x7f')]),settings[_0x4344('0x117')]=parseFloat(tempArray[_0x4344('0x117')]);}else{if(typeof settings=='undefined')var settings={'isMinting':![],'highPoints':0x1f40,'highFarm':0x59d8,'lowPoints':0xbb8,'builtOutPercentage':0.25,'needsMorePercentage':0.85};localStorage[_0x4344('0x18')](_0x4344('0x101'),JSON[_0x4344('0x6f')](settings));}if(!settings['isMinting'])settings[_0x4344('0x71')]=![];if(!settings[_0x4344('0x81')])settings['highFarm']=0x1869f;if(!settings[_0x4344('0x62')])settings['highPoints']=0x2ee0;if(!settings[_0x4344('0x25')])settings['lowPoints']=0x1;if(!settings[_0x4344('0x7f')])settings[_0x4344('0x7f')]=0.2;if(!settings['needsMorePercentage'])settings[_0x4344('0x117')]=0.85;if(settings[_0x4344('0x7f')]>0x1)settings[_0x4344('0x7f')]=0.95;if(settings[_0x4344('0x117')]>0x1)settings[_0x4344('0x117')]=0.95;if(settings['builtOutPercentage']<0x0)settings[_0x4344('0x7f')]=0.1;if(settings[_0x4344('0x117')]<0x0)settings[_0x4344('0x117')]=0.1;$(_0x4344('0x110'))[0x0]&&($('#sendResources')[0x0][_0x4344('0x6d')](),$('#totals')[0x0][_0x4344('0x6d')]());game_data[_0x4344('0x12f')][_0x4344('0x2a')]>0x0?(URLIncRes=_0x4344('0x11d')+game_data[_0x4344('0x12f')]['id']+'&screen=overview_villages&mode=trader&type=inc&page=-1&type=inc',URLProd=_0x4344('0x11d')+game_data[_0x4344('0x12f')]['id']+_0x4344('0xd2')):(URLIncRes=_0x4344('0x9d'),URLProd=_0x4344('0x11b'));function sendResource(_0x398aa5,_0x2e0862,_0x2d1673,_0x1c95c0,_0x377697,_0x31c81f){$(_0x4344('0x8e'))[_0x4344('0x10a')](_0x4344('0xb8'),!![]),setTimeout(function(){$('#'+_0x31c81f)[0x0][_0x4344('0x6d')](),$(_0x4344('0x8e'))[_0x4344('0x10a')](_0x4344('0xb8'),![]),$('#building')[0x0][_0x4344('0x13b')]();if($(_0x4344('0xdb'))['length']<=0x2){alert(_0x4344('0x4e'));$('.btn-pp')[_0x4344('0x111')]>0x0&&$('.btn-pp')[_0x4344('0x6d')]();throw Error(_0x4344('0x13d'));}},0xc8);var _0x47430e={'target_id':_0x2e0862,'wood':_0x2d1673,'stone':_0x1c95c0,'iron':_0x377697};TribalWars[_0x4344('0x27')](_0x4344('0x129'),{'ajaxaction':_0x4344('0x54'),'village':_0x398aa5},_0x47430e,function(_0x4ff8ec){UI['SuccessMessage'](_0x4ff8ec[_0x4344('0x10b')]),console[_0x4344('0x22')](_0x4ff8ec['message']);},!0x1);}function displayEverything(){$['get'](URLIncRes,function(){console['log'](_0x4344('0x9a'));})[_0x4344('0xed')](function(_0x10b489){var _0x34c858=$(_0x10b489);for(var _0x33e46c=0x1;_0x33e46c<_0x34c858['find'](_0x4344('0x9b'))[_0x4344('0x111')]-0x1;_0x33e46c++){var _0x3c0846={},_0x323bd3;if($(_0x4344('0x19'))[0x0]){console[_0x4344('0x22')](_0x4344('0x99'));let _0x3e64a9=_0x34c858[_0x4344('0x12')](_0x4344('0x9b'))[_0x33e46c][_0x4344('0xb0')][0x5]['children'][0x1][_0x4344('0xb0')];for(let _0x1c5e99=0x0;_0x1c5e99<Object[_0x4344('0x13c')](_0x3e64a9)['length'];_0x1c5e99++){if(_0x34c858[_0x4344('0x12')](_0x4344('0x9b'))[0x1][_0x4344('0xb0')][0x2][_0x4344('0x21')]!=langShinko[0x10]){let _0x5e2f19=$(_0x3e64a9[_0x1c5e99]),_0xcce405=_0x5e2f19[_0x4344('0x12')](_0x4344('0xfb'))[_0x4344('0xe3')](_0x4344('0xe2'))['split'](' '),_0x22ae9b=_0xcce405[_0xcce405['length']-0x1],_0x462302=_0x5e2f19[_0x4344('0xeb')]()[_0x4344('0xaa')](/[^\d]/g,'');_0x3c0846[_0x22ae9b]=_0x462302,_0x323bd3=_0x34c858[_0x4344('0x12')](_0x4344('0x9b'))[_0x33e46c][_0x4344('0xb0')][0x3][_0x4344('0xb0')][0x2]['href'][_0x4344('0x11a')](/id=(\d*)/)[0x1];}}}else{console[_0x4344('0x22')](_0x4344('0x5'));let _0x54d505=_0x34c858[_0x4344('0x12')](_0x4344('0x9b'))[_0x33e46c][_0x4344('0xb0')][0x8][_0x4344('0xb0')];console[_0x4344('0x22')](Object[_0x4344('0x13c')](_0x54d505)['length']);for(let _0x4920d0=0x0;_0x4920d0<Object[_0x4344('0x13c')](_0x54d505)[_0x4344('0x111')];_0x4920d0++){let _0x47ab04=$(_0x54d505[_0x4920d0]);var _0x426104;_0x47ab04[0x0][_0x4344('0x2d')]['indexOf'](_0x4344('0xdf'))>-0x1?_0x426104=_0x47ab04[_0x4344('0x12')](_0x4344('0x1c'))[_0x4344('0xe3')](_0x4344('0xe2'))['split'](' '):_0x426104=_0x47ab04[_0x4344('0xe3')](_0x4344('0xe2'))[_0x4344('0xf')](' ');if(_0x34c858[_0x4344('0x12')](_0x4344('0x9b'))[0x1][_0x4344('0xb0')][0x3][_0x4344('0x21')]!=langShinko[0xf]){let _0x600512=_0x426104[_0x426104['length']-0x1];console[_0x4344('0x22')](_0x600512);let _0x35a8f6=_0x47ab04[_0x4344('0xeb')]()['replace'](/[^\d]/g,'');console[_0x4344('0x22')](_0x35a8f6),_0x3c0846[_0x600512]=_0x35a8f6,_0x323bd3=_0x34c858['find'](_0x4344('0x9b'))[_0x33e46c][_0x4344('0xb0')][0x4][_0x4344('0xb0')][0x0][_0x4344('0x52')][_0x4344('0x11a')](/id=(\d*)/)[0x1];}}}_0x34c858[_0x4344('0x12')]('#trades_table tr')[0x1][_0x4344('0xb0')][0x3][_0x4344('0x21')]!=langShinko[0xf]&&_0x34c858[_0x4344('0x12')](_0x4344('0x9b'))[0x1][_0x4344('0xb0')][0x2][_0x4344('0x21')]!=langShinko[0x10]&&(incomingRes[_0x323bd3]==undefined&&(incomingRes[_0x323bd3]={'wood':0x0,'stone':0x0,'iron':0x0}),_0x3c0846[_0x4344('0xc7')]!=undefined&&(incomingRes[_0x323bd3][_0x4344('0xc7')]+=parseInt(_0x3c0846[_0x4344('0xc7')])),_0x3c0846[_0x4344('0xfc')]!=undefined&&(incomingRes[_0x323bd3][_0x4344('0xfc')]+=parseInt(_0x3c0846['stone'])),_0x3c0846[_0x4344('0x43')]!=undefined&&(incomingRes[_0x323bd3][_0x4344('0x43')]+=parseInt(_0x3c0846[_0x4344('0x43')])));}$[_0x4344('0x122')](URLProd,function(){console['log'](_0x4344('0x14d'));})[_0x4344('0xed')](function(_0x396ea7){if($(_0x4344('0x19'))[0x0]){console[_0x4344('0x22')](_0x4344('0x99')),allWoodObjects=$(_0x396ea7)['find'](_0x4344('0xf9')),allClayObjects=$(_0x396ea7)[_0x4344('0x12')](_0x4344('0xb3')),allIronObjects=$(_0x396ea7)[_0x4344('0x12')]('.res.miron,.warn_90.miron,.warn.miron'),allWarehouses=$(_0x396ea7)[_0x4344('0x12')](_0x4344('0xd4')),allVillages=$(_0x396ea7)[_0x4344('0x12')]('.quickedit-vn'),allFarms=$(_0x396ea7)[_0x4344('0x12')](_0x4344('0xa8')),allMerchants=$(_0x396ea7)[_0x4344('0x12')](_0x4344('0xd6')),productionTable=$(_0x396ea7)[_0x4344('0x12')](_0x4344('0x124'));for(var _0x4a3958=0x0;_0x4a3958<allWoodObjects[_0x4344('0x111')];_0x4a3958++){n=allWoodObjects[_0x4a3958]['textContent'],n=n[_0x4344('0xaa')](/\./g,'')['replace'](',',''),allWoodTotals[_0x4344('0x133')](n);}for(let _0x26fefd=0x0;_0x26fefd<allClayObjects[_0x4344('0x111')];_0x26fefd++){n=allClayObjects[_0x26fefd][_0x4344('0x44')],n=n[_0x4344('0xaa')](/\./g,'')['replace'](',',''),allClayTotals[_0x4344('0x133')](n);}for(let _0x2150e9=0x0;_0x2150e9<allIronObjects[_0x4344('0x111')];_0x2150e9++){n=allIronObjects[_0x2150e9][_0x4344('0x44')],n=n[_0x4344('0xaa')](/\./g,'')[_0x4344('0xaa')](',',''),allIronTotals[_0x4344('0x133')](n);}for(let _0x2d6a80=0x0;_0x2d6a80<allVillages[_0x4344('0x111')];_0x2d6a80++){warehouseCapacity[_0x4344('0x133')](allWarehouses[_0x2d6a80][_0x4344('0x140')][_0x4344('0x21')]);}for(let _0xde8623=0x0;_0xde8623<allVillages[_0x4344('0x111')];_0xde8623++){for(let _0x1aa1a1=0x1;_0x1aa1a1<allMerchants[_0x4344('0x111')];_0x1aa1a1++){availableMerchants[_0x4344('0x133')](allMerchants[_0x1aa1a1][_0x4344('0x21')]);}totalMerchants[_0x4344('0x133')]('999');}for(let _0xd1f737=0x0;_0xd1f737<allVillages[_0x4344('0x111')];_0xd1f737++){farmSpaceUsed[_0x4344('0x133')](allFarms[_0xd1f737][_0x4344('0x140')][_0x4344('0x21')][_0x4344('0x11a')](/(\d*)\/(\d*)/)[0x1]),farmSpaceTotal[_0x4344('0x133')](allFarms[_0xd1f737][_0x4344('0x140')]['innerText'][_0x4344('0x11a')](/(\d*)\/(\d*)/)[0x2]);}for(let _0x508f2f=0x0;_0x508f2f<allVillages[_0x4344('0x111')];_0x508f2f++){console[_0x4344('0x22')](_0x508f2f*0x2+0x1),villagePoints[_0x4344('0x133')](productionTable[_0x508f2f*0x2+0x1][_0x4344('0x21')][_0x4344('0xaa')](/\./g,'')[_0x4344('0xaa')](',',''));}}else{console['log'](_0x4344('0x5')),allWoodObjects=$(_0x396ea7)[_0x4344('0x12')](_0x4344('0xd9')),allClayObjects=$(_0x396ea7)[_0x4344('0x12')]('.res.stone,.warn_90.stone,.warn.stone'),allIronObjects=$(_0x396ea7)[_0x4344('0x12')](_0x4344('0x6')),allVillages=$(_0x396ea7)[_0x4344('0x12')](_0x4344('0x57'));for(let _0x31977b=0x0;_0x31977b<allWoodObjects[_0x4344('0x111')];_0x31977b++){n=allWoodObjects[_0x31977b][_0x4344('0x44')],n=n[_0x4344('0xaa')](/\./g,'')[_0x4344('0xaa')](',',''),allWoodTotals[_0x4344('0x133')](n);}for(let _0x5d4965=0x0;_0x5d4965<allClayObjects['length'];_0x5d4965++){n=allClayObjects[_0x5d4965][_0x4344('0x44')],n=n[_0x4344('0xaa')](/\./g,'')[_0x4344('0xaa')](',',''),allClayTotals['push'](n);}for(let _0x18dd3c=0x0;_0x18dd3c<allIronObjects[_0x4344('0x111')];_0x18dd3c++){n=allIronObjects[_0x18dd3c]['textContent'],n=n[_0x4344('0xaa')](/\./g,'')[_0x4344('0xaa')](',',''),allIronTotals[_0x4344('0x133')](n);}for(let _0x1c2e3c=0x0;_0x1c2e3c<allVillages[_0x4344('0x111')];_0x1c2e3c++){warehouseCapacity[_0x4344('0x133')](allIronObjects[_0x1c2e3c][_0x4344('0x140')][_0x4344('0xca')][_0x4344('0x2d')]);}for(let _0x1bc1d2=0x0;_0x1bc1d2<allVillages[_0x4344('0x111')];_0x1bc1d2++){availableMerchants[_0x4344('0x133')](allIronObjects[_0x1bc1d2][_0x4344('0x140')]['nextElementSibling'][_0x4344('0xca')][_0x4344('0x21')]['match'](/(\d*)\/(\d*)/)[0x1]),totalMerchants[_0x4344('0x133')](allIronObjects[_0x1bc1d2][_0x4344('0x140')][_0x4344('0xca')][_0x4344('0xca')][_0x4344('0x21')][_0x4344('0x11a')](/(\d*)\/(\d*)/)[0x2]);}for(let _0x20126b=0x0;_0x20126b<allVillages[_0x4344('0x111')];_0x20126b++){farmSpaceUsed[_0x4344('0x133')](allIronObjects[_0x20126b][_0x4344('0x140')][_0x4344('0xca')][_0x4344('0xca')][_0x4344('0xca')]['innerText'][_0x4344('0x11a')](/(\d*)\/(\d*)/)[0x1]),farmSpaceTotal[_0x4344('0x133')](allIronObjects[_0x20126b][_0x4344('0x140')][_0x4344('0xca')]['nextElementSibling'][_0x4344('0xca')][_0x4344('0x21')]['match'](/(\d*)\/(\d*)/)[0x2]);}for(let _0x83e56e=0x0;_0x83e56e<allVillages[_0x4344('0x111')];_0x83e56e++){villagePoints[_0x4344('0x133')](allWoodObjects[_0x83e56e][_0x4344('0x140')][_0x4344('0xab')][_0x4344('0x21')][_0x4344('0xaa')](/\./g,'')[_0x4344('0xaa')](',',''));}}for(let _0x40f581=0x0;_0x40f581<allVillages[_0x4344('0x111')];_0x40f581++){villagesData[_0x4344('0x133')]({'id':allVillages[_0x40f581]['dataset']['id'],'points':villagePoints[_0x40f581],'url':allVillages[_0x40f581][_0x4344('0xb0')][0x0][_0x4344('0xb0')][0x0][_0x4344('0x52')],'name':allVillages[_0x40f581][_0x4344('0x21')][_0x4344('0x13e')](),'wood':allWoodTotals[_0x40f581],'stone':allClayTotals[_0x40f581],'iron':allIronTotals[_0x40f581],'availableMerchants':availableMerchants[_0x40f581],'totalMerchants':totalMerchants[_0x40f581],'warehouseCapacity':warehouseCapacity[_0x40f581],'farmSpaceUsed':farmSpaceUsed[_0x40f581],'farmSpaceTotal':farmSpaceTotal[_0x40f581]});}villagesData['sort']((_0x5336e3,_0x13e355)=>parseInt(_0x5336e3[_0x4344('0x142')])<parseInt(_0x13e355['points'])?0x1:-0x1),totalWood=0x0,totalStone=0x0,totalIron=0x0;for(let _0x56d96c in allWoodTotals){totalWood+=parseInt(allWoodTotals[_0x56d96c]);}for(let _0x41f673 in allClayTotals){totalStone+=parseInt(allClayTotals[_0x41f673]);}for(let _0x25ef6d in allIronTotals){totalIron+=parseInt(allIronTotals[_0x25ef6d]);}for(let _0x329f02=0x0;_0x329f02<Object[_0x4344('0x13c')](incomingRes)[_0x4344('0x111')];_0x329f02++){totalWood+=incomingRes[Object[_0x4344('0x13c')](incomingRes)[_0x329f02]][_0x4344('0xc7')],totalStone+=incomingRes[Object[_0x4344('0x13c')](incomingRes)[_0x329f02]][_0x4344('0xfc')],totalIron+=incomingRes[Object['keys'](incomingRes)[_0x329f02]][_0x4344('0x43')];}woodAverage=Math[_0x4344('0x28')](totalWood/warehouseCapacity[_0x4344('0x111')]),stoneAverage=Math['floor'](totalStone/warehouseCapacity[_0x4344('0x111')]),ironAverage=Math[_0x4344('0x28')](totalIron/warehouseCapacity['length']);if(settings[_0x4344('0x71')]==![]){actualWoodAverage=woodAverage,actualStoneAverage=stoneAverage,actualIronAverage=ironAverage,consideredBuiltOut=0x0,actualTotalWood=totalWood,actualTotalStone=totalStone,actualTotalIron=totalIron,actualWHCountNeedsBalancingWood=warehouseCapacity[_0x4344('0x111')],actualWHCountNeedsBalancingStone=warehouseCapacity[_0x4344('0x111')],actualWHCountNeedsBalancingIron=warehouseCapacity[_0x4344('0x111')];for(let _0x50c003=0x0;_0x50c003<warehouseCapacity[_0x4344('0x111')];_0x50c003++){actualWoodAverage=Math[_0x4344('0x28')](actualTotalWood/actualWHCountNeedsBalancingWood),actualStoneAverage=Math[_0x4344('0x28')](actualTotalStone/actualWHCountNeedsBalancingStone),actualIronAverage=Math['floor'](actualTotalIron/actualWHCountNeedsBalancingIron),warehouseCapacity[_0x50c003]<actualWoodAverage&&(console['log']('Warehouse in village '+_0x50c003+_0x4344('0x76')),actualTotalWood-=actualWoodAverage-warehouseCapacity[_0x50c003]*settings['needsMorePercentage'],actualWHCountNeedsBalancingWood--),warehouseCapacity[_0x50c003]<actualStoneAverage&&(console[_0x4344('0x22')](_0x4344('0x16')+_0x50c003+_0x4344('0x76')),actualTotalStone-=actualStoneAverage-warehouseCapacity[_0x50c003]*settings['needsMorePercentage'],actualWHCountNeedsBalancingStone--),warehouseCapacity[_0x50c003]<actualIronAverage&&(console[_0x4344('0x22')](_0x4344('0x16')+_0x50c003+' too small for average, reducing resources, and increasing for every other village'),actualTotalIron-=actualIronAverage-warehouseCapacity[_0x50c003]*settings[_0x4344('0x117')],actualWHCountNeedsBalancingIron--),console['log'](_0x4344('0xcc')+actualWoodAverage+'-'+actualIronAverage+'-'+actualStoneAverage);}for(let _0x1e52e6=0x0;_0x1e52e6<villagesData[_0x4344('0x111')];_0x1e52e6++){(villagesData[_0x1e52e6][_0x4344('0x12a')]>settings[_0x4344('0x81')]||villagesData[_0x1e52e6][_0x4344('0x142')]>settings[_0x4344('0x62')])&&(console[_0x4344('0x22')](_0x4344('0x146')+_0x1e52e6+', and increasing average for all other villages'),actualTotalWood-=warehouseCapacity[_0x1e52e6]*settings['builtOutPercentage'],actualWHCountNeedsBalancingWood--,actualTotalStone-=warehouseCapacity[_0x1e52e6]*settings[_0x4344('0x7f')],actualWHCountNeedsBalancingStone--,actualTotalIron-=warehouseCapacity[_0x1e52e6]*settings[_0x4344('0x7f')],actualWHCountNeedsBalancingIron--,consideredBuiltOut++),actualWoodAverage=Math['floor'](actualTotalWood/actualWHCountNeedsBalancingWood),actualStoneAverage=Math[_0x4344('0x28')](actualTotalStone/actualWHCountNeedsBalancingStone),actualIronAverage=Math['floor'](actualTotalIron/actualWHCountNeedsBalancingIron),console[_0x4344('0x22')](_0x4344('0xcc')+actualWoodAverage+'-'+actualIronAverage+'-'+actualStoneAverage);}(actualWoodAverage>=0x55730||actualStoneAverage>=0x55730||actualIronAverage>=0x55730)&&alert('With your current settings, you end up having a lot of excess resources that can't be assigned. Consider increasing the 'highFarm' setting to a higher value, or increasing the lowPoints value so more villages are included to have priority. This is usually due to having a lot of villages completely built out, or having very high average resources, and not a lot of villages that need resources badly.
If you just want to balance evenly, set highFarm to 99999

With the current settings, you are trying to assign an average of '+numberWithCommas(actualWoodAverage)+_0x4344('0xc5')+numberWithCommas(actualStoneAverage)+' clay, and '+numberWithCommas(actualIronAverage)+' iron per village that isn't considered small, or fully built (currently '+numberWithCommas(consideredBuiltOut)+_0x4344('0x5c'));}else actualWoodAverage=woodAverage,actualStoneAverage=stoneAverage,actualIronAverage=ironAverage;totalsAndAverages=_0x4344('0x14a')+langShinko[0x9]+': '+numberWithCommas(totalWood)+_0x4344('0x4b')+langShinko[0xa]+': '+numberWithCommas(totalStone)+_0x4344('0x4b')+langShinko[0xb]+': '+numberWithCommas(totalIron)+'</td>
                    </tr>
                    <tr class='sophRowB'>
                    <td>'+langShinko[0xc]+': '+numberWithCommas(woodAverage)+_0x4344('0x4b')+langShinko[0xd]+': '+numberWithCommas(stoneAverage)+_0x4344('0x4b')+langShinko[0xe]+': '+numberWithCommas(ironAverage)+'</td>
                    </tr>
                    <tr class='sophRowA'>
                    <td>Actual woodaverage after correction: '+numberWithCommas(actualWoodAverage)+_0x4344('0x4a')+numberWithCommas(actualStoneAverage)+'</td>
                    <td>Actual ironaverage after correction: '+numberWithCommas(actualIronAverage)+'</td>
                    </tr>
                    </table>',$(_0x4344('0x74'))['eq'](0x0)[_0x4344('0x141')](_0x4344('0x149')),$(_0x4344('0x19'))['eq'](0x0)[_0x4344('0x141')](_0x4344('0x149'));for(let _0x393216=0x0;_0x393216<villagesData[_0x4344('0x111')];_0x393216++){console['log']('-----------------------------------------------------------------------------------------'),excessResources[_0x393216]=[],shortageResources[_0x393216]=[],villageID[_0x4344('0x133')](villagesData[_0x393216]['id']),typeof incomingRes[villagesData[_0x393216]['id']]==_0x4344('0xf2')?(incomingWood=0x0,incomingStone=0x0,incomingIron=0x0):(incomingWood=incomingRes[villagesData[_0x393216]['id']][_0x4344('0xc7')],incomingStone=incomingRes[villagesData[_0x393216]['id']][_0x4344('0xfc')],incomingIron=incomingRes[villagesData[_0x393216]['id']][_0x4344('0x43')]),console[_0x4344('0x22')](_0x4344('0x4f')+incomingWood+_0x4344('0x83')+incomingStone+_0x4344('0xa5')+incomingIron),actualWoodAverage<villagesData[_0x393216][_0x4344('0x10f')]*settings[_0x4344('0x117')]?tempWood=parseInt(villagesData[_0x393216][_0x4344('0xc7')])+incomingWood-actualWoodAverage:(console[_0x4344('0x22')](_0x4344('0x53')),tempWood=-Math[_0x4344('0x1e')](villagesData[_0x393216][_0x4344('0x10f')]*settings[_0x4344('0x117')]-incomingWood-parseInt(villagesData[_0x393216]['wood']))),actualStoneAverage<villagesData[_0x393216][_0x4344('0x10f')]*settings[_0x4344('0x117')]?tempStone=parseInt(villagesData[_0x393216][_0x4344('0xfc')])+incomingStone-actualStoneAverage:(console['log'](_0x4344('0x53')),tempStone=-Math[_0x4344('0x1e')](villagesData[_0x393216][_0x4344('0x10f')]*settings[_0x4344('0x117')]-incomingStone-parseInt(villagesData[_0x393216][_0x4344('0xfc')]))),actualIronAverage<villagesData[_0x393216][_0x4344('0x10f')]*settings[_0x4344('0x117')]?tempIron=parseInt(villagesData[_0x393216][_0x4344('0x43')])+incomingIron-actualIronAverage:(console['log']('Average is higher than capacity, reduce'),tempIron=-Math[_0x4344('0x1e')](villagesData[_0x393216]['warehouseCapacity']*settings[_0x4344('0x117')]-incomingIron-parseInt(villagesData[_0x393216][_0x4344('0x43')]))),console['log'](tempWood),console[_0x4344('0x22')](tempStone),console[_0x4344('0x22')](tempIron),(villagesData[_0x393216][_0x4344('0x12a')]>settings[_0x4344('0x81')]||villagesData[_0x393216]['points']>settings['highPoints'])&&(console[_0x4344('0x22')](_0x4344('0x87')+villagesData[_0x393216]['farmSpaceUsed']+'/'+villagesData[_0x393216]['farmSpaceTotal']+_0x4344('0xad')+villagesData[_0x393216][_0x4344('0x11f')]+_0x4344('0xa6')+villagesData[_0x393216][_0x4344('0x142')]+'/'+settings[_0x4344('0x62')]+_0x4344('0x2f')+0x64*settings[_0x4344('0x7f')]+'%'),parseInt(villagesData[_0x393216][_0x4344('0xc7')])+incomingWood>settings[_0x4344('0x7f')]*villagesData[_0x393216][_0x4344('0x10f')]&&(tempWood=Math[_0x4344('0x1e')](parseInt(villagesData[_0x393216]['wood'])+incomingWood-settings[_0x4344('0x7f')]*villagesData[_0x393216][_0x4344('0x10f')])),parseInt(villagesData[_0x393216][_0x4344('0xfc')])+incomingStone>settings[_0x4344('0x7f')]*villagesData[_0x393216][_0x4344('0x10f')]&&(tempStone=Math[_0x4344('0x1e')](parseInt(villagesData[_0x393216][_0x4344('0xfc')])+incomingStone-settings[_0x4344('0x7f')]*villagesData[_0x393216]['warehouseCapacity'])),parseInt(villagesData[_0x393216][_0x4344('0x43')])+incomingIron>settings[_0x4344('0x7f')]*villagesData[_0x393216][_0x4344('0x10f')]&&(tempIron=Math[_0x4344('0x1e')](parseInt(villagesData[_0x393216][_0x4344('0x43')])+incomingIron-settings['builtOutPercentage']*villagesData[_0x393216][_0x4344('0x10f')]))),villagesData[_0x393216]['points']<settings[_0x4344('0x25')]&&(console[_0x4344('0x22')](villagesData[_0x393216]['name']+' ('+villagesData[_0x393216][_0x4344('0x142')]+')'+_0x4344('0xac')+settings[_0x4344('0x117')]*0x64+_0x4344('0xb1')),tempWood=-Math[_0x4344('0x1e')](villagesData[_0x393216][_0x4344('0x10f')]*settings[_0x4344('0x117')]-parseInt(villagesData[_0x393216][_0x4344('0xc7')])-incomingWood),tempStone=-Math[_0x4344('0x1e')](villagesData[_0x393216][_0x4344('0x10f')]*settings[_0x4344('0x117')]-parseInt(villagesData[_0x393216][_0x4344('0xfc')])-incomingStone),tempIron=-Math['round'](villagesData[_0x393216]['warehouseCapacity']*settings[_0x4344('0x117')]-parseInt(villagesData[_0x393216][_0x4344('0x43')])-incomingIron)),incomingWood+parseInt(villagesData[_0x393216][_0x4344('0xc7')])>villagesData[_0x393216]['warehouseCapacity']&&(console[_0x4344('0x22')](_0x4344('0x3e')+villagesData[_0x393216]['name']),tempWood=-Math[_0x4344('0x1e')](villagesData[_0x393216][_0x4344('0x10f')]*settings['needsMorePercentage']-incomingWood-parseInt(villagesData[_0x393216][_0x4344('0xc7')]))),incomingStone+parseInt(villagesData[_0x393216][_0x4344('0xfc')])>villagesData[_0x393216][_0x4344('0x10f')]&&(console['log'](_0x4344('0x10')+villagesData[_0x393216][_0x4344('0x11f')]),tempStone=-Math[_0x4344('0x1e')](villagesData[_0x393216][_0x4344('0x10f')]*settings[_0x4344('0x117')]-incomingStone-parseInt(villagesData[_0x393216][_0x4344('0xfc')]))),incomingIron+parseInt(villagesData[_0x393216][_0x4344('0x43')])>villagesData[_0x393216]['warehouseCapacity']&&(console[_0x4344('0x22')](_0x4344('0x9e')+villagesData[_0x393216]['name']),tempIron=-Math[_0x4344('0x1e')](villagesData[_0x393216]['warehouseCapacity']*settings['needsMorePercentage']-incomingIron-parseInt(villagesData[_0x393216][_0x4344('0x43')]))),tempWood>0x0&&tempWood>parseInt(villagesData[_0x393216][_0x4344('0xc7')])&&(console[_0x4344('0x22')]('Excess is bigger than current available resources, setting it to current available'),tempWood=parseInt(villagesData[_0x393216][_0x4344('0xc7')])),tempStone>0x0&&tempStone>parseInt(villagesData[_0x393216][_0x4344('0xfc')])&&(console[_0x4344('0x22')](_0x4344('0x11c')),tempStone=parseInt(villagesData[_0x393216][_0x4344('0xfc')])),tempIron>0x0&&tempIron>parseInt(villagesData[_0x393216][_0x4344('0x43')])&&(console[_0x4344('0x
